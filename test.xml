<?xml version="1.0" encoding="UTF-8" ?>
<config>

	<module name='civetweb' required='no'>
		<!-- https://github.com/civetweb/civetweb/blob/master/docs/api/mg_start.md -->
		<option name='listening_ports' value='8990' />
		<option name='request_timeout_ms' value='10000' />
		<option name='enable_auth_domain_check' value='no' />
	</module>
	
	<module name='information' required='no' />

	<agent name='intvalue' type='integer' value='0'>

	</agent>

	<interface type='dbus' name='MyInterface' dbus-interface='br.eti.werneck.udjat.MyInterface'>
		<handler name='echo' type='method-call' >
			<arg name="text" direction='both' type="string" />
		</handler>
	</interface>

	<interface type='*' action-name='agent' dbus-interface='br.eti.werneck.udjat.MyInterface' />

	<agent type='random' name='alerter' update-timer='10' on-demand='false'>

		<alert name='on-value' type='dbus' trigger-event='value-change' dbus-path='/' dbus-interface='br.eti.werneck.udjat.MyInterface' dbus-member='changed'>
		
			<argument name='value' type='int16' value='${agent.value}' />
			<argument name='level' type='string' value='${state.level}' />
			<argument name='summary' type='string' value='${state.summary}' />
				
		</alert>

	</agent>

</config>

